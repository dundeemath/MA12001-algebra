<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Week 4: Introduction to matrices – MA12001 Algebra</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-b512256bc363577b27543e003c495f0c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./week4.html">Chapter 2: Matrices</a></li><li class="breadcrumb-item"><a href="./week4.html">Week 4: Introduction to matrices</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">MA12001 Algebra</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Chapter 1: Vectors</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1: Displacement Vectors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2: General Vectors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3: Dot and cross products</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Chapter 2: Matrices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week4.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Week 4: Introduction to matrices</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 5: Determinants and inverses of <span class="math inline">\(3\times 3\)</span> matrices</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 6: Applications of matrices, and Gaussian elimination</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Chapter 3: Lines, planes and spheres</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 7: Lines</span></a>
  </div>
</li>
          <li class="sidebar-item">
 <span class="menu-text">Week 8: Planes</span>
  </li>
          <li class="sidebar-item">
 <span class="menu-text">Week 9: Spheres</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Chapter 4: Complex numbers</span></span>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./links.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Helpful links</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#special-matrices" id="toc-special-matrices" class="nav-link active" data-scroll-target="#special-matrices">Special matrices</a></li>
  <li><a href="#basic-operations-for-matrices" id="toc-basic-operations-for-matrices" class="nav-link" data-scroll-target="#basic-operations-for-matrices">Basic operations for matrices</a>
  <ul class="collapse">
  <li><a href="#the-transpose" id="toc-the-transpose" class="nav-link" data-scroll-target="#the-transpose">The transpose</a>
  <ul class="collapse">
  <li><a href="#properties-of-the-transpose" id="toc-properties-of-the-transpose" class="nav-link" data-scroll-target="#properties-of-the-transpose">Properties of the transpose</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#matrix-multiplication" id="toc-matrix-multiplication" class="nav-link" data-scroll-target="#matrix-multiplication">Matrix multiplication</a>
  <ul class="collapse">
  <li><a href="#properties-of-matrix-multiplication" id="toc-properties-of-matrix-multiplication" class="nav-link" data-scroll-target="#properties-of-matrix-multiplication">Properties of matrix multiplication</a></li>
  </ul></li>
  <li><a href="#inverses-for-2times2-matrices" id="toc-inverses-for-2times2-matrices" class="nav-link" data-scroll-target="#inverses-for-2times2-matrices">Inverses for <span class="math inline">\(2\times2\)</span> matrices</a>
  <ul class="collapse">
  <li><a href="#properties-of-the-inverse" id="toc-properties-of-the-inverse" class="nav-link" data-scroll-target="#properties-of-the-inverse">Properties of the inverse</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./week4.html">Chapter 2: Matrices</a></li><li class="breadcrumb-item"><a href="./week4.html">Week 4: Introduction to matrices</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Week 4: Introduction to matrices</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="hidden">

</div>
<p>We previously saw that we can think of vectors as column vectors, that is, a series of numbers in a column: <span class="math display">\[
\begin{bmatrix} 1 \\ 2 \\ 5\end{bmatrix}\in\mathbb{R}^3,
\]</span> and with this idea we defined addition and scalar multiplication in the obvious ways. We can extend this idea to larger grids of numbers, for example <span class="math display">\[
\begin{bmatrix} 1 &amp;0 &amp;-1\\3 &amp; 2 &amp; -2 \end{bmatrix} \in \mathbb{R}^{2\times3}.
\]</span> This is called a <em>matrix</em>, in particular a <span class="math inline">\(2\times 3\)</span> real<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> matrix<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. There are two <em>rows</em> and three <em>columns</em>.</p>
<p>We typically write matrices with the following notation<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>: <span class="math display">\[
A = \begin{bmatrix} a_{11} &amp; a_{12} \\ a_{21} &amp; a_{22} \end{bmatrix},
\]</span> <span class="math display">\[
B = \begin{bmatrix} b_{11} &amp; b_{12} \\ b_{21} &amp; b_{22} \\ b_{31} &amp; b_{32} \end{bmatrix},
\]</span> etc.</p>
<p>Capital, non-bold letters for the matrix, and lowercase letters with row then column for the scalar entries of the matrix. The only exception to this is that when there is only one column, we usually revert to our old notation of <span class="math inline">\({\mathbf{c}} = \begin{bmatrix} c_1\\c_2\\c_3\\c_4 \end{bmatrix}\)</span>, because column vectors <em>are</em> matrices (sometimes called column matrices).</p>
<p><strong>Think:</strong> what <em>shape</em> are the matrices <span class="math inline">\(A\)</span>, <span class="math inline">\(B\)</span> and <span class="math inline">\({\mathbf{c}}\)</span> above?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span class="math inline">\(A\)</span> is <span class="math inline">\(2\times 2\)</span>, <span class="math inline">\(B\)</span> is <span class="math inline">\(3\times 2\)</span> and <span class="math inline">\(\mathbf{c}\)</span> is <span class="math inline">\(4\times 1\)</span>.</p>
</div>
</div>
</div>
<p>Sometimes we call the shape of a matrix its <em>order</em>.</p>
<section id="special-matrices" class="level1">
<h1>Special matrices</h1>
<p>There are literally hundreds of different classifications of matrices. Some of the most important, which we’ll use in this module, are:</p>
<ul>
<li><p><em>Square</em> matrices, where the number of rows is the same as the number of columns.</p></li>
<li><p><em>Diagonal</em> matrices, square matrices where there zeros everywhere except the <span class="math inline">\(a_{11}\)</span>, <span class="math inline">\(a_{22}\)</span> entries as in: <span class="math display">\[
\begin{bmatrix} 3 &amp; 0 &amp; 0\\ 0 &amp; -1 &amp; 0\\ 0 &amp; 0&amp; \frac{1}{5} \end{bmatrix}.
\]</span></p></li>
<li><p><em>Triangular</em> matrices, where all the elements above (lower triangular) or below (upper trianular) are zero. For example, this is a <span class="math inline">\(3\times3\)</span> upper triangular matrix: <span class="math display">\[
\begin{bmatrix} 3 &amp; 1 &amp; 1\\ 0 &amp; -1 &amp; 2\\ 0 &amp; 0&amp; -4 \end{bmatrix}.
\]</span></p></li>
<li><p><em>Identity</em> matrices. This is a diagonal matrix with only ones on the diagonal. It will be very important later on. It is always called <span class="math inline">\(I\)</span>. This is the <span class="math inline">\(4\times4\)</span> identity matrix: <span class="math display">\[
I=\begin{bmatrix} 1 &amp; 0 &amp; 0 &amp;0\\ 0 &amp; 1 &amp; 0 &amp; 0\\ 0 &amp; 0&amp; 1&amp;0\\0&amp;0&amp;0&amp;1 \end{bmatrix}.
\]</span></p></li>
</ul>
</section>
<section id="basic-operations-for-matrices" class="level1">
<h1>Basic operations for matrices</h1>
<p>Addition, subtraction and scalar multiplication are exactly what you think:</p>
<p><span class="math display">\[
\begin{bmatrix} a_{11} &amp; a_{12} \\ a_{21} &amp; a_{22} \end{bmatrix} + \begin{bmatrix} b_{11} &amp; b_{12} \\ b_{21} &amp; b_{22} \end{bmatrix} = \begin{bmatrix} a_{11} + b_{11} &amp; a_{12} + b_{12} \\ a_{21} + b_{21} &amp; a_{22} + b_{22} \end{bmatrix},
\]</span></p>
<p><span class="math display">\[
\begin{bmatrix} a_{11} &amp; a_{12} &amp; a_{13}\\ a_{21} &amp; a_{22} &amp; a_{23} \end{bmatrix} - \begin{bmatrix} b_{11} &amp; b_{12}&amp; b_{13} \\ b_{21} &amp; b_{22}&amp; b_{23} \end{bmatrix} = \begin{bmatrix} a_{11} - b_{11} &amp; a_{12} - b_{12} &amp; a_{13}-b_{13}\\ a_{21} - b_{21} &amp; a_{22} - b_{22} &amp; a_{23}-b_{23} \end{bmatrix},
\]</span></p>
<p><span class="math display">\[
4\begin{bmatrix} 1 &amp; 0 &amp; 4\\2 &amp; 3&amp; 2 \\ 2 &amp; 1 &amp; 2 \end{bmatrix} =\begin{bmatrix} 4 &amp; 0 &amp; 16\\8 &amp; 12&amp; 8 \\ 8 &amp; 4 &amp; 8 \end{bmatrix}.
\]</span></p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>We can only add or subtract matrices that have exactly the same shape. It doesn’t mean anything to add a 2D vector to a <span class="math inline">\(2\times2\)</span> matrix, or subtract a <span class="math inline">\(2\times2\)</span> matrix from a <span class="math inline">\(3\times3\)</span> matrix.</p>
</div>
</div>
<section id="the-transpose" class="level2">
<h2 class="anchored" data-anchor-id="the-transpose">The transpose</h2>
<p>An extra operation we use for matrices, which we use a lot, is called the transpose, denoted with a little letter T. This takes a matrix and exchanges the rows with the columns. So the transpose of a <span class="math inline">\(5\times 2\)</span> matrix is a <span class="math inline">\(2\times 5\)</span> matrix.</p>
<p>If <span class="math display">\[
A=\begin{bmatrix} 1 &amp;3&amp;4\\2&amp;1&amp;1 \end{bmatrix}
\]</span> its transpose is <span class="math display">\[
A^T=\begin{bmatrix} 1 &amp;2\\3 &amp; 1\\4&amp;1 \end{bmatrix}.
\]</span></p>
<p><strong>Think:</strong> what’s the transpose of <span class="math inline">\(M=\begin{bmatrix} 1&amp; 2\\3&amp; 4 \end{bmatrix}\)</span>?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span class="math inline">\(M^T=\begin{bmatrix} 1 &amp;3\\2&amp;4 \end{bmatrix}\)</span></p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled" title="Common mistake">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Common mistake
</div>
</div>
<div class="callout-body-container callout-body">
<p>Often people flip over the wrong diagonal. The diagonal that starts at the top left is THE diagonal of a matrix, and it doesn’t change when we transpose.</p>
</div>
</div>
<section id="properties-of-the-transpose" class="level3">
<h3 class="anchored" data-anchor-id="properties-of-the-transpose">Properties of the transpose</h3>
<p>You can easily prove the following statements:</p>
<ul>
<li>The transpose of a square matrix is square.</li>
<li>The transpose of the transpose is the original matrix: <span class="math inline">\(\left(A^T\right)^T=A\)</span>.</li>
<li>The transpose of a product obeys <span class="math inline">\((AB)^T = B^TA^T\)</span>.</li>
<li>The transpose of a sum obeys <span class="math inline">\((A+B)^T = A^T + B^T\)</span>.</li>
</ul>
</section>
</section>
</section>
<section id="matrix-multiplication" class="level1">
<h1>Matrix multiplication</h1>
<p>The real power of matrices comes by the introduction of a new type of multiplication. It is <strong>not</strong> just multiplying the correponding entries. In fact, we <em>can</em> mutliply matrices with <em>different sizes</em>.</p>
<p>We’ll first define the operation itself and see some properties, and then we’ll discuss why this is a useful definition.</p>
<p>The first time to know is that we can only multiple matrices if the number of columns of the first matrix is equal to the number of rows of the second matrix. So we can multiply a <span class="math inline">\(4\times 2\)</span> matrix with a <span class="math inline">\(2\times 3\)</span> matrix, but we can’t multiply a <span class="math inline">\(4\times 3\)</span> matrix with a <span class="math inline">\(2\times 3\)</span> matrix.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Write the shapes of the matrices you want to multiply. If the middle numbers – the second number of the first shape and the first number of the second shape – are the same, you can multiply them.</p>
</div>
</div>
<p>Suppose we want to multiple <span class="math inline">\(A\)</span>, which has shape <span class="math inline">\(m\times n\)</span> with <span class="math inline">\(B\)</span>, which has <span class="math inline">\(n\times p\)</span>. Then the product <span class="math inline">\(C=AB\)</span>, which has shape <span class="math inline">\(m\times p\)</span>, is formally defined as: <span class="math display">\[
c_{ij} = \sum_{k=1}^n a_{ik}b_{kj}.
\]</span></p>
<p>What does this mean? It’s hard to explain in these notes. My method involves putting my fingers on the two matrices I’m multiplying together. There are loads of examples of it on YouTube, just seach for “matrix multiplication”.</p>
<p>One way to say it is that the row <span class="math inline">\(i\)</span>, column <span class="math inline">\(j\)</span> entry of <span class="math inline">\(C\)</span> is the <strong>dot product</strong> of the <span class="math inline">\(i\)</span>th <em>row</em> of <span class="math inline">\(A\)</span> and the <span class="math inline">\(j\)</span>th <em>column</em> of <span class="math inline">\(B\)</span>.</p>
<p>Here’s an example:</p>
<p>Suppose <span class="math inline">\(A=\begin{bmatrix} 1 &amp;3\\2&amp;4 \end{bmatrix}\)</span> and <span class="math inline">\(B=\begin{bmatrix} 5 &amp;1 &amp;2\\-1&amp;0&amp;3 \end{bmatrix}\)</span>.</p>
<p><span class="math inline">\(A\)</span> is <span class="math inline">\(2\times2\)</span> and <span class="math inline">\(B\)</span> is <span class="math inline">\(2\times 3\)</span>, so we can multiply them and the product <span class="math inline">\(AB\)</span> has shape <span class="math inline">\(2\times 3\)</span>. The result is <span class="math display">\[
\begin{aligned}
AB &amp;= \begin{bmatrix} 1 &amp;3\\2&amp;4 \end{bmatrix}\begin{bmatrix} 5 &amp;1 &amp;2\\-1&amp;0&amp;3 \end{bmatrix} \\
&amp;= \begin{bmatrix} 1\times 5+3\times-1 &amp; 1\times 1+3\times 0 &amp; 1\times 2+3\times 3 \\ 2\times 5+4\times-1 &amp; 2\times 1+4\times 0 &amp; 2\times 2+4\times 3 \end{bmatrix} \\
&amp;= \begin{bmatrix} 2&amp;1&amp;11\\6&amp;2&amp;16 \end{bmatrix}.
\end{aligned}
\]</span></p>
<p><strong>Think:</strong> Calculate the product <span class="math inline">\(\begin{bmatrix} 1 &amp;2 &amp; -3\\0 &amp; 0 &amp; 1 \\ -1 &amp; -2 &amp; 0 \end{bmatrix}\begin{bmatrix} 5 \\ -4 \\ -1\end{bmatrix}\)</span>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span class="math display">\[
\begin{bmatrix} 0 \\ -1 \\ 3\end{bmatrix}.
\]</span></p>
</div>
</div>
</div>
<p>This matrix-times-vector product is a particularly important special case of matrix multiplication, that we’ll see lots. Notice that the result is another vector.</p>
<p><strong>Think:</strong> Calculate the product <span class="math inline">\(\begin{bmatrix} 1 &amp;2 &amp; -3\\0 &amp; 0 &amp; 1 \\ -1 &amp; -2 &amp; 0 \end{bmatrix}\begin{bmatrix} 1 &amp;3\\2&amp;4 \end{bmatrix}\)</span>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>This is a trick question! The shapes are incompatible, you can’t do it.</p>
</div>
</div>
</div>
<section id="properties-of-matrix-multiplication" class="level2">
<h2 class="anchored" data-anchor-id="properties-of-matrix-multiplication">Properties of matrix multiplication</h2>
<p>It’s straightforward, if boring, to prove the following:</p>
<ul>
<li><span class="math inline">\(A(B+C) = AB+AC\)</span>: it’s distributive over addition</li>
<li><span class="math inline">\((AB)C = A(BC)\)</span>: it’s associative.</li>
<li>It’s <em>not</em> commutative. <span class="math inline">\(AB\)</span> is not the same as <span class="math inline">\(BA\)</span>. One may be possible and the other not possible.</li>
<li>For any matrix <span class="math inline">\(A\)</span>, and the identity matrix <span class="math inline">\(I\)</span> (of the correct size for the multiplication to work) <span class="math inline">\(AI = A\)</span> and <span class="math inline">\(IA = A\)</span>.</li>
</ul>
</section>
</section>
<section id="inverses-for-2times2-matrices" class="level1">
<h1>Inverses for <span class="math inline">\(2\times2\)</span> matrices</h1>
<p>For normal multiplication, for every number except zero has an inverse. The inverse of <span class="math inline">\(4\)</span> is <span class="math inline">\(\frac{1}{4}\)</span>. And multiplying a number with its inverse gives 1. <span class="math inline">\(4\times \frac{1}{4} = \frac{1}{4} \times 4 = 1\)</span>.</p>
<p>There is a direct equivalent, for <em>square</em> matrices. We denote the inverse of a matrix <span class="math inline">\(A\)</span> by <span class="math inline">\(A^{-1}\)</span>. But it’s very important to know that it doesn’t always exist, just like the number <span class="math inline">\(0\)</span> has no inverse in normal numbers.</p>
<p>A matrix is either <em>invertible</em>, or it is called <em>singular</em>.</p>
<p>How do we find the inverse? Consider a <span class="math inline">\(2\times 2\)</span> matrix <span class="math inline">\(A=\begin{bmatrix} a&amp;b\\c&amp;d \end{bmatrix}\)</span>.</p>
<p>We want to find <span class="math inline">\(A^{-1}\)</span> such that <span class="math inline">\(AA^{-1} = I\)</span>, and let’s call <span class="math inline">\(A^{-1}=\begin{bmatrix} e&amp;f\\ g&amp;h \end{bmatrix}\)</span>.</p>
<p><span class="math display">\[
\begin{bmatrix} a&amp;b\\ c&amp;d \end{bmatrix}\begin{bmatrix} e&amp;f\\ g&amp;h \end{bmatrix} = \begin{bmatrix} 1&amp; 0\\ 0 &amp; 1 \end{bmatrix}
\]</span></p>
<p><span class="math display">\[
\begin{bmatrix} ae+bg&amp; af+bh\\ ce+dg&amp;cf+dh \end{bmatrix} = \begin{bmatrix} 1&amp; 0\\ 0 &amp; 1 \end{bmatrix}
\]</span></p>
<p>Comparing the entries of the matrices on the right- and left-hand sides, we have four simultaneous equations: <span class="math display">\[
\begin{aligned}
ae+bg&amp;=1, \\
cf+dh&amp;=1, \\
af+bh&amp;=0,\\
ce+dg&amp;=0,
\end{aligned}
\]</span> which, after some effort, can be solved to give <span class="math display">\[
\begin{aligned}
e &amp;= \frac{d}{ad-bc},\\
f &amp;= \frac{-b}{ad-bc},\\
g &amp;= \frac{-c}{ad-bc},\\
h &amp;= \frac{a}{ad-bc},\\
\end{aligned}
\]</span> or in other words <span class="math display">\[
A^{-1} = \frac{1}{ad-bc} \begin{bmatrix} d &amp;-b\\ -c &amp; a \end{bmatrix}.
\]</span> This is the formula for the inverse of <span class="math inline">\(2\times2\)</span> matrices.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Learn this formula</p>
</div>
</div>
<p><strong>Think:</strong> what’s the inverse of <span class="math inline">\(\begin{bmatrix} 1&amp;1\\0&amp;-3 \end{bmatrix}\)</span>?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><span class="math display">\[
\frac{1}{1\times-3-1\times0}\begin{bmatrix} -3&amp;-1\\-0&amp;1 \end{bmatrix} = \frac{1}{-3}\begin{bmatrix} -3&amp;-1\\0&amp;1 \end{bmatrix}= \begin{bmatrix} 1&amp;\frac{1}{3}\\0&amp;-\frac{1}{3} \end{bmatrix}.
\]</span></p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Once you’ve found an inverse, check your result by multiplying it with the matrix. It should give the identity.</p>
</div>
</div>
<p>There’s a problem with the formula! What if <span class="math inline">\(ad-bc=0\)</span>? We can’t divide by zero. In this case, the inverse doesn’t exist, and the matrix is singular. We call <span class="math inline">\(ad-bc\)</span> the <em>determinant</em> of <span class="math inline">\(A\)</span>. More on this next week.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>A <span class="math inline">\(2\times2\)</span> matrix is singular exactly when <span class="math inline">\(ad-bc=0\)</span>.</p>
</div>
</div>
<section id="properties-of-the-inverse" class="level2">
<h2 class="anchored" data-anchor-id="properties-of-the-inverse">Properties of the inverse</h2>
<p>Using arguments similar to that above, you could prove the following for <span class="math inline">\(2\times2\)</span> inverses:<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<ul>
<li>The inverse of a square matrix is square.</li>
<li>If the inverse exists, it is both a right- and left- inverse, even though matrix multiplication is not commutation. So <span class="math inline">\(AA^{-1}=I\)</span> means <span class="math inline">\(A^{-1}A = I\)</span>.</li>
<li>The inverse is unique. If <span class="math inline">\(AB=I\)</span>, then <span class="math inline">\(B=A^{-1}\)</span> and <span class="math inline">\(A=B^{-1}\)</span>.</li>
<li>The inverse of the inverse is the original matrix: <span class="math inline">\(\left(A^{-1}\right)^{-1}=A\)</span>.</li>
<li>The inverse of the transpose is the transpose of the inverse: <span class="math inline">\(\left(A^T\right)^{-1}=\left(A^{-1}\right)^T\)</span>.</li>
<li>The inverse of a product obeys <span class="math inline">\((AB)^{-1} = B^{-1}A^{-1}\)</span>.</li>
</ul>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Eventually you’ll see matrices with complex numbers inside.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Pronounced “two by three”.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Again, many authors use round brackets. You can too if you like.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>In fact they hold for any sized square matrix.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>